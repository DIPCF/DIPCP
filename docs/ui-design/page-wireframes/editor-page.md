# 编辑器页面线框图

## 📋 页面信息

- **页面名称**: 编辑器页面
- **页面路径**: `/editor`
- **页面类型**: 编辑页面
- **访问权限**: 需要登录
- **创建日期**: 2025年10月21日
- **最后更新**: 2025年10月22日
- **下次评审**: 2025年11月1日

## 🎯 页面布局

### 默认状态（全宽显示）
```
┌─────────────────────────────────────────────────────────┐
│ DIPCP Logo    导航菜单                                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📁 项目名称 > docs > README.md                    ⋯    │
│                                                         │
│  [💾 保存] [👁 预览]                    [📤 提交审核]     │
│                                                         │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ # DPCC                                             │ │
│  │ Decentralized Project Collaboration Center        │ │
│  │                                                     │ │
│  │ 开始编写Markdown内容...                             │ │
│  │                                                     │ │
│  │                                                     │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 下拉菜单状态
```
┌─────────────────────────────────────────────────────────┐
│ DIPCP Logo    导航菜单                                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📁 项目名称 > docs > README.md                    ⋯    │
│                                                         │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 文件信息                                            │ │
│  │ 编辑历史                                            │ │
│  │ 协作信息                                            │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  [💾 保存] [👁 预览]                    [📤 提交审核]     │
│                                                         │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ # DPCC                                             │ │
│  │ Decentralized Project Collaboration Center        │ │
│  │                                                     │ │
│  │ 开始编写Markdown内容...                             │ │
│  │                                                     │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 分割视图状态（75% + 25%）
```
┌─────────────────────────────────────────────────────────┐
│ DIPCP Logo    导航菜单                                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📁 项目名称 > docs > README.md                    ⋯    │
│                                                         │
│  编辑器区域 (75%)                   文件信息 (25%)        │
│  ┌─────────────────────────┐   ┌─────────────────────┐   │
│  │ [💾 保存] [👁 预览]      │   │ 文件信息        ×    │   │
│  │                         │   │ ──────────────────  │   │
│  │ ┌─────────────────────┐ │   │ 文件名: README.md   │   │
│  │ │ # DPCC             │ │   │ 最后修改: 2小时前   │   │
│  │ │ Decentralized...   │ │   │ 修改者: 当前用户     │   │
│  │ │                     │ │   │ 状态: 编辑中         │   │
│  │ │ 开始编写Markdown... │ │   │ 字符数: 45          │   │
│  │ │                     │ │   │ 行数: 3             │   │
│  │ └─────────────────────┘ │   │                     │   │
│  │                         │   │                     │   │
│  │           [📤 提交审核] │   │                     │   │
│  └─────────────────────────┘   └─────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

## 🎨 视觉设计

### 布局原则
- **简化优先**: 默认只显示编辑器核心功能
- **按需显示**: 详细信息通过下拉菜单按需展示
- **智能布局**: 支持全宽和分割视图两种模式
- **平滑过渡**: 布局切换使用CSS transition动画

### 色彩方案
- **主背景**: 使用主题变量 `--bg-primary`
- **编辑器区域**: 使用 `--bg-primary` 白色背景
- **信息面板**: 使用 `--bg-secondary` 区分层次
- **边框**: 使用 `--border-color` 统一边框样式
- **文字**: 使用 `--text-primary` 和 `--text-secondary`

### 间距系统
- **标准间距**: 使用 8px 网格系统
- **编辑器间距**: 编辑器区域和信息面板之间 16px 间距
- **内容间距**: 内部元素使用 8px、12px、16px 间距

## 🔧 功能特性

### 主要功能
1. **Markdown编辑**: 实时编辑Markdown格式文档
2. **文件管理**: 保存、预览功能，历史记录和协作功能移至下拉菜单
3. **信息查看**: 通过下拉菜单查看文件详细信息、编辑历史、协作信息
4. **布局切换**: 智能的全宽/分割视图切换
5. **面包屑导航**: 使用组件系统动态渲染，支持真实项目路径
6. **国际化支持**: 完整的中英文界面切换
7. **组件化架构**: 基于自定义组件系统，支持动态渲染和状态管理

### 交互设计
1. **下拉菜单**: 点击"⋯"按钮显示菜单选项
2. **信息面板**: 点击菜单项显示对应信息
3. **关闭按钮**: 点击"×"关闭信息面板
4. **面包屑导航**: 点击项目名称返回项目详情页面

### 状态管理
- **默认状态**: 全宽显示，只显示编辑器核心功能
- **菜单状态**: 显示下拉菜单选项
- **信息状态**: 分割视图显示详细信息
- **编辑状态**: 显示文件内容和编辑功能

## 📱 响应式设计

### 桌面端 (≥1024px)
- 全宽模式：编辑器区域占满100%宽度
- 分割模式：编辑器区域75%，信息面板25%
- 下拉菜单：右上角显示

### 平板端 (768px - 1023px)
- 自适应布局：根据屏幕宽度调整比例
- 信息面板：最小宽度200px
- 触摸优化：增大按钮和点击区域

### 移动端 (<768px)
- 全宽显示：移动端默认全宽显示
- 堆叠布局：信息面板在编辑器区域下方显示
- 简化菜单：下拉菜单适配小屏幕

## 🎯 用户体验

### 新手友好
- **简化界面**: 默认只显示核心功能，减少认知负担
- **渐进式披露**: 详细信息按需显示，避免信息过载
- **直观操作**: 编辑器功能清晰，状态反馈明确

### 高效操作
- **快速访问**: 常用功能直接可见
- **智能布局**: 自动调整布局适应不同需求
- **状态保持**: 记住用户的布局偏好

### 视觉层次
- **主次分明**: 编辑器为主要功能，信息查看为辅助功能
- **状态区分**: 编辑状态和预览状态有明显标识
- **色彩引导**: 使用颜色区分不同状态和操作

## 🔄 交互流程

### 查看文件信息流程
1. 用户进入编辑器页面（默认全宽显示）
2. 点击面包屑右侧的"⋯"按钮
3. 从下拉菜单选择"文件信息"
4. 页面切换到分割视图，右侧显示文件信息
5. 点击"×"按钮关闭信息面板，恢复全宽显示

### 编辑文件流程
1. 用户在编辑器中查看和编辑文件内容
2. 使用工具栏按钮进行保存、预览、历史等操作
3. 编辑完成后点击"提交审核"按钮
4. 系统保存编辑内容并提交审核

### 导航返回流程
1. 用户点击面包屑中的项目名称（如"📁 DPCC"）
2. 页面自动跳转到项目详情页面
3. 用户可以看到项目文件列表和其他项目信息

## 📊 数据展示

### 文件内容
- **实时编辑**: 支持Markdown格式的实时编辑
- **内容缓存**: 自动缓存文件内容到IndexedDB
- **后台更新**: 在后台获取最新文件内容

### 文件信息
- **基本信息**: 文件名、最后修改时间、修改者
- **状态信息**: 编辑状态、字符数、行数
- **实时更新**: 信息根据编辑内容实时更新

## 🎨 设计规范

### 组件规范
- **按钮**: 使用统一的按钮样式系统
- **面板**: 信息面板使用卡片式设计
- **菜单**: 下拉菜单使用悬浮卡片样式
- **编辑器**: 使用标准的textarea组件

### 动画规范
- **过渡时间**: 0.3s ease
- **布局切换**: 平滑的宽度变化动画
- **菜单显示**: 淡入淡出效果
- **状态变化**: 微妙的颜色过渡

## 🔧 技术实现

### CSS架构
- **布局系统**: Flexbox + CSS Grid
- **主题系统**: CSS变量支持深色/浅色主题
- **响应式**: 媒体查询适配不同屏幕
- **动画**: CSS transition实现平滑过渡

### JavaScript功能
- **组件系统**: 基于Component基类的自定义组件架构
- **组件加载器**: ComponentLoader统一管理组件注册和创建
- **布局管理**: 动态切换全宽/分割视图
- **菜单控制**: 下拉菜单显示/隐藏
- **数据渲染**: 动态渲染信息面板内容
- **状态管理**: 保存和恢复布局状态
- **国际化**: I18nService提供多语言支持
- **文件管理**: StorageService处理文件缓存和本地存储

## 📝 更新日志

### 2025-10-22
- **组件化重构**: 将HTML字符串代码重构为自定义组件系统
- **面包屑导航**: 使用Breadcrumb组件动态渲染，支持真实项目路径
- **按钮布局统一**: 将按钮工具栏移到面包屑导航下方，与项目详情页面保持一致
- **工具栏简化**: 移除"历史"和"协作"按钮，移至下拉菜单中
- **国际化支持**: 所有用户界面文本支持中英文切换
- **文件加载优化**: 修复文件内容加载问题，支持从localStorage读取当前文件信息
- **缓存问题解决**: 实现禁用缓存的开发服务器，解决浏览器缓存导致的更新问题
- **组件系统**: 建立完整的组件注册和加载机制，支持动态组件创建

### 2025-10-21
- **界面简化**: 移除右上角用户信息和通知按钮
- **布局优化**: 实现智能的全宽/分割视图切换
- **下拉菜单**: 添加"⋯"按钮和下拉菜单功能
- **信息面板**: 实现右侧信息面板，支持3种信息类型
- **关闭功能**: 添加关闭按钮，可以恢复全宽显示
- **面包屑导航**: 修复面包屑导航点击功能，支持返回项目详情页面
- **数据加载**: 修复文件内容加载问题，确保通过正确登录流程后能正常显示文件内容
- **用户体验**: 优化界面布局，对新手更友好

### 设计原则
- **简化优先**: 默认界面简洁，减少认知负担
- **按需显示**: 详细信息通过交互按需展示
- **智能布局**: 根据用户操作自动调整布局
- **平滑过渡**: 所有布局变化都有动画效果
- **数据一致性**: 确保通过正确流程访问时数据正常加载