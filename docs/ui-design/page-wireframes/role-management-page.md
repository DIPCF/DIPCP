# 项目权限设置页面UI设计

## 1. 页面概述

### 1.1 功能目标
- 配置代码所有者(CODEOWNERS)
- 管理团队权限分配
- 简单的权限管理界面

### 1.2 页面定位
- 项目设置的核心功能页面
- 只有仓库所有者可以访问
- 影响项目的安全性和协作流程

## 2. 页面布局设计

### 2.1 整体布局
```
┌─────────────────────────────────────────────────────────────┐
│                     项目权限设置                             │
├─────────────────────────────────────────────────────────────┤
│ 代码所有者配置                                               │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 全局所有者: @username1 @username2                        │ │
│ │ 特定文件/目录:                                           │ │
│ │ /src/ → @senior-dev1                                    │ │
│ │ /docs/ → @tech-lead1                                    │ │
│ │ *.js → @frontend-team                                   │ │
│ │ package.json → @tech-lead1 @senior-dev1                 │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 团队权限分配                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 开发者团队 (Developers)     [Write] [编辑] [移除]         │ │
│ │ 技术负责人团队 (Tech Leads) [Admin] [编辑] [移除]         │ │
│ │ 项目维护者团队 (Maintainers)[Admin] [编辑] [移除]         │ │
│ │ [+ 添加团队]                                             │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ [保存设置]                                                   │
└─────────────────────────────────────────────────────────────┘
```

## 3. 功能模块设计

### 3.2 代码所有者配置模块
```
┌─────────────────────────────────────────────────────────────┐
│ 代码所有者配置 (CODEOWNERS)                                │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 全局所有者:                                             │ │
│ │ [@username1] [@username2] [+ 添加]                      │ │
│ │                                                         │ │
│ │ 特定文件/目录规则:                                       │ │
│ │ ┌─────────────────────────────────────────────────────┐ │ │
│ │ │ 路径模式     | 所有者                               │ │ │
│ │ │ ────────────────────────────────────────────────── │ │ │
│ │ │ /src/        | @senior-dev1                        │ │ │
│ │ │ /docs/       | @tech-lead1                         │ │ │
│ │ │ *.js         | @frontend-team                      │ │ │
│ │ │ package.json | @tech-lead1 @senior-dev1           │ │ │
│ │ │ [+ 添加规则]                                        │ │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ │                                                         │ │
│ │ 预览 CODEOWNERS 文件:                                   │ │
│ │ ┌─────────────────────────────────────────────────────┐ │ │
│ │ │ # 全局代码所有者                                     │ │ │
│ │ │ * @username1 @username2                             │ │ │
│ │ │                                                     │ │ │
│ │ │ # 特定文件/目录                                      │ │ │
│ │ │ /src/ @senior-dev1                                  │ │ │
│ │ │ /docs/ @tech-lead1                                  │ │ │
│ │ │ *.js @frontend-team                                 │ │ │
│ │ │ package.json @tech-lead1 @senior-dev1              │ │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.3 团队权限分配模块
```
┌─────────────────────────────────────────────────────────────┐
│ 团队权限分配                                                │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 现有团队:                                               │ │
│ │ ┌─────────────────────────────────────────────────────┐ │ │
│ │ │ 团队名称          权限级别    操作                   │ │ │
│ │ │ ────────────────────────────────────────────────── │ │ │
│ │ │ 开发者团队         Write      [编辑] [移除]         │ │ │
│ │ │ 技术负责人团队     Admin      [编辑] [移除]         │ │ │
│ │ │ 项目维护者团队     Admin      [编辑] [移除]         │ │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ │                                                         │ │
│ │ 添加新团队:                                             │ │
│ │ 团队名称: [________________]                           │ │
│ │ 权限级别: [Write ▼] [Admin ▼] [Read ▼] [Triage ▼]     │ │
│ │ [+ 添加团队]                                           │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 4. 交互设计

### 4.2 代码所有者配置交互
- 用户名输入框支持@提及自动完成
- 路径模式支持通配符和目录匹配
- 规则列表支持拖拽排序
- 实时预览CODEOWNERS文件内容

### 4.3 团队权限分配交互
- 团队选择下拉框显示可用团队
- 权限级别选择器
- 团队列表支持编辑和移除
- 批量操作支持

## 5. 模态框设计

### 5.1 添加团队模态框
```
┌─────────────────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 添加团队权限                                ✕ 关闭      │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 选择团队: [开发者团队 ▼]                                │ │
│ │ 权限级别: [Write ▼]                                     │ │
│ │                                                         │ │
│ │ 权限说明:                                               │ │
│ │ • Write: 可以推送代码，创建分支，管理Issues和PRs        │ │
│ │ • Admin: 拥有完全管理权限，可以修改仓库设置             │ │
│ │ • Read: 只能查看代码，不能修改                          │ │
│ │ • Triage: 可以管理Issues和PRs，但不能推送代码           │ │
│ │                                                         │ │
│ │ [取消] [添加团队]                                       │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 预览效果模态框
```
┌─────────────────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 权限设置预览                                ✕ 关闭      │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 分支保护规则:                                            │ │
│ │ ✓ main分支已启用保护                                    │ │
│ │ ✓ 需要PR审查才能合并                                    │ │
│ │ ✓ 需要代码所有者审查                                    │ │
│ │                                                         │ │
│ │ 代码所有者:                                              │ │
│ │ ✓ 全局所有者: @username1, @username2                    │ │
│ │ ✓ 特定文件规则: 4条                                     │ │
│ │                                                         │ │
│ │ 团队权限:                                                │ │
│ │ ✓ 开发者团队: Write权限                                 │ │
│ │ ✓ 技术负责人团队: Admin权限                             │ │
│ │ ✓ 项目维护者团队: Admin权限                             │ │
│ │                                                         │ │
│ │ [确定] [返回编辑]                                       │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 6. 状态指示

### 6.2 权限状态
- **已启用**: 绿色圆点，权限规则已启用
- **已禁用**: 灰色圆点，权限规则已禁用
- **冲突**: 红色警告，权限配置有冲突
- **待验证**: 黄色问号，需要验证权限设置

## 7. 功能流程

### 7.2 配置代码所有者流程
```
添加全局所有者 → 设置特定文件规则 → 预览CODEOWNERS文件 → 保存配置
```

### 7.3 分配团队权限流程
```
选择团队 → 设置权限级别 → 验证权限设置 → 保存分配
```

## 8. 响应式适配

### 8.1 移动端适配
- 单列布局，所有模块垂直排列
- 复选框和输入框适配触摸操作
- 模态框全屏显示
- 简化操作按钮

### 8.2 平板端适配
- 保持单列布局
- 优化触摸交互
- 适配的字体大小
- 合适的间距设置

---

**设计版本**: v1.0  
**创建日期**: 2025-10-24  
**最后更新**: 2025-10-24  
**设计者**: SPCP UI团队